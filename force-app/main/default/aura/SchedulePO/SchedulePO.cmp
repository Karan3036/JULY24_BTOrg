<aura:component controller="SchedulePOController" implements="force:appHostable,flexipage:availableForRecordHome,force:lightningQuickActionWithoutHeader,flexipage:availableForAllPageTypes,lightning:actionOverride,force:hasRecordId,forceCommunity:availableForAllPageTypes">
     <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
     <aura:attribute name="scheduleString" type="string" />
     <aura:attribute name="Schedules" type="list" />  
     <aura:attribute name="ScheduleId" type="string" />
     <!-- <aura:attribute name="taskRecord" type="Project_Task__c" default="{ 'sobjectType': 'Project_Task__c',
                                                                                   'Name':''}"/> -->
     <aura:attribute name="Spinner" type="boolean" default="false"/>
     <aura:attribute name="isNewTask" type="boolean" />
     <aura:attribute name="isNewTasks" type="boolean" />
     <aura:attribute name="taskName" type="String" />
     <aura:attribute name="description" type="String" />
     <aura:attribute name="duration" type="String" />
     <aura:attribute name="startDate" type="Date" />
     <aura:attribute name="selectedLookUpRecord" type="sObject" default="{}"/>
     <aura:attribute name="selectedContactRecord" type="sObject" default="{}"/>
    <aura:attribute name="selectedAccountRecord" type="sObject" default="{}"/>
     <aura:attribute name="selectedProjectRecord" type="sObject" default="{}"/>
     <aura:attribute name="isProject" type="boolean" default="false"/>
    <aura:attribute name="isVendor" type="boolean" default="false"/>
     <aura:attribute name="scheduleRecId" type="String"/>
     <aura:attribute name="projectId" type="String"/>
     <aura:attribute name="selectedPhaseValue" type="String"/>
     <aura:attribute name="selectedLookUpRecordName" type="String"/> 
     <aura:attribute name="selectedValue" type="String"/>
     <aura:attribute name="selectedProjectId" type="String"/>
     <aura:attribute name="listOfFields" type="List" />

     <!-- predecessor lookup -->
     <aura:attribute name="diplayPredecessorlist" type="boolean" default="false" />
     <aura:attribute name="predecessorList" type="List" default="" />
     <aura:attribute name="allPredecessorValue" type="List" default="" />

     <aura:attribute name="selectedPredecessor" type="String" default="" />
     <aura:attribute name="selectedPredecessorId" type="String" default="" />


     
     <ltng:require styles="{!$Resource.MOdalPreviewWidth52}"/>
     <header class="slds-modal__header">
        <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">New Task</h2>
     </header>   
    <div class="slds-modal__content" id="modal-content-id-1"  >
        <lightning:recordEditForm aura:id="recordViewForm" objectApiName="buildertek__Project_Task__c" onsubmit="{!c.handleSubmit}" density="Comfy" >
            <div class="" style="height:50vh;width:100%;overflow: auto;">
                <div class="slds-p-around_medium" style="background-color:white;">
                    <lightning:layout multipleRows="true">
                        <aura:iteration items="{!v.listOfFields}" var="field">
                            <lightning:layoutItem size="12" mediumDeviceSize="6" padding="around-small">
                                <aura:if  isTrue="{!and(field.name != 'buildertek__Purchase_Order__c', field.name != 'buildertek__Project__c')}" >                                 
                                    <lightning:inputField fieldName="{!field.name}" required="{!field.Required}" aura:id="inputFields"   />  
                                        <aura:set attribute="else"> 
                                            <aura:if  isTrue="{!and(field.name =='buildertek__Project__c')}" >        
                                                <lightning:inputField fieldName="{!field.name}" aura:id="inputFields"  value="{!v.parentRecordId}" disabled="{!v.forProject}" onchange="{!c.changeProject}"/>
                                            </aura:if>
                                        </aura:set>
                                </aura:if>
                            </lightning:layoutItem>
                        </aura:iteration>
                    </lightning:layout>
                </div>
            </div>
            <footer aura:id="footer" class="slds-modal__footer">
                <lightning:button variant="neutral" title="Cancel" label="Cancel" onclick="{! c.closeModel }" />
                <lightning:button variant="brand" type="submit" name="save" label="Save" disabled="{!v.isDisabled}" />
            </footer>
        </lightning:recordEditForm>
    </div>    
    <!-- </aura:if>-->
    <aura:if isTrue="{!v.Spinner}">
        <div aura:id="spinnerId" class="slds-spinner_container">
           <div class="slds-spinner--brand  slds-spinner slds-spinner--large slds-is-relative" role="alert">
             <span class="slds-assistive-text">Loading</span>
             <div class="slds-spinner__dot-a"></div>
             <div class="slds-spinner__dot-b"></div>
               <div class="custom-loading-text">
                           <b>Processing, Please Wait</b>
                       </div>
               
           </div>
        </div>
    </aura:if>
</aura:component>